<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamellection | The Wagon Site</title>
    
    <!-- Icons & Fonts -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Yatra+One&display=swap" rel="stylesheet">
    
    <!-- Tracking (Preserved) -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "oqwnloclrl");
    </script>

    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #bd00ff;
            --bg-dark: #0f0f13;
            --card-bg: rgba(255, 255, 255, 0.05);
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
            --font-main: 'Outfit', sans-serif;
            --font-header: 'Yatra One', cursive;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: var(--font-main);
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(189, 0, 255, 0.15), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(0, 242, 255, 0.15), transparent 25%);
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
        }

        /* --- Navbar --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            border-bottom: var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-logo { font-family: var(--font-header); font-size: 1.5rem; color: var(--primary); text-decoration: none; }
        .nav-links a { color: #ccc; text-decoration: none; margin-left: 20px; transition: 0.3s; font-size: 0.9rem; }
        .nav-links a:hover, .nav-links a.active { color: white; text-shadow: 0 0 10px var(--primary); }

        /* --- Search Section --- */
        .hero {
            text-align: center;
            padding: 60px 20px 40px;
        }

        h1 {
            font-family: var(--font-header);
            font-size: 3rem;
            margin: 0 0 20px 0;
            background: linear-gradient(to right, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 242, 255, 0.3);
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        #searchInput {
            width: 100%;
            padding: 15px 50px 15px 25px;
            border-radius: 30px;
            border: var(--glass-border);
            background: rgba(0,0,0,0.5);
            color: white;
            font-size: 1.1rem;
            font-family: var(--font-main);
            outline: none;
            transition: 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        #searchInput:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
            font-size: 1.2rem;
        }

        /* --- Game Grid --- */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 25px;
            padding: 20px 60px 100px; /* Bottom padding for music player */
            max-width: 1600px;
            margin: 0 auto;
        }

        .game-card {
            background: var(--card-bg);
            border: var(--glass-border);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            text-decoration: none;
            display: block;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 10px 40px rgba(0, 242, 255, 0.15);
        }

        .img-wrapper {
            width: 100%;
            height: 180px;
            overflow: hidden;
            position: relative;
            background: #000;
        }

        .img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.5s;
            opacity: 0.8;
        }

        .game-card:hover .img-wrapper img { opacity: 1; transform: scale(1.1); }

        .card-info {
            padding: 15px;
            text-align: center;
        }

        .card-title {
            color: white;
            font-weight: 500;
            font-size: 1rem;
            margin: 0;
        }

        .fav-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            border: none;
            color: #fff;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: 0.2s;
        }

        .game-card:hover .fav-btn { opacity: 1; }
        .fav-btn:hover { color: red; background: white; }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 0.8rem;
            border-top: var(--glass-border);
            background: rgba(0,0,0,0.4);
        }

        /* --- MUSIC PLAYER WIDGET --- */
        .music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.4);
            z-index: 1000;
            transition: 0.3s;
        }
        .music-toggle:hover { transform: rotate(90deg) scale(1.1); }

        .music-player {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            background: rgba(15, 15, 20, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 20px;
            transform-origin: bottom right;
            transform: scale(0);
            opacity: 0;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 999;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .music-player.active { transform: scale(1); opacity: 1; }

        .player-header { display: flex; justify-content: space-between; margin-bottom: 15px; color: #888; font-size: 0.8rem; }
        .song-info { text-align: center; margin-bottom: 15px; }
        .song-title { color: white; font-weight: bold; display: block; margin-bottom: 5px; }
        .controls { display: flex; justify-content: center; gap: 15px; align-items: center; margin-bottom: 10px; }
        .ctrl-btn { background: none; border: none; color: #ccc; cursor: pointer; font-size: 1.2rem; transition: 0.2s; }
        .ctrl-btn:hover { color: var(--primary); }
        .play-btn { font-size: 2rem; color: var(--primary); }
        input[type="range"] { width: 100%; accent-color: var(--primary); height: 4px; }

        /* No Results Msg */
        #no-results {
            text-align: center;
            grid-column: 1 / -1;
            padding: 40px;
            display: none;
            color: #888;
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop></audio>

    <!-- Navigation -->
    <nav>
        <a href="../Pages/Home.html" class="nav-logo">
            <i class="ph-bold ph-game-controller"></i> The Wagon
        </a>
        <div class="nav-links">
            <a href="../Pages/Home.html">Home</a>
            <a href="../Pages/Navigation.html">All</a>
            <a href="../Pages/TheBypassing.html">Bypassing</a>
            <a href="#" class="active">Gamellection</a>
            <a href="../Pages/ProxList.html">Proxies</a>
            <a href="../Pages/Config.html" title="Settings"><i class="ph-bold ph-gear"></i></a>
        </div>
    </nav>

    <!-- Hero Search -->
    <div class="hero">
        <h1>GAMELLECTION</h1>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search for games..." onkeyup="filterGames()">
            <i class="ph-bold ph-magnifying-glass search-icon"></i>
        </div>
    </div>

    <!-- Game Grid -->
    <div class="game-grid" id="gameGrid">
        <!-- Games are injected via Javascript below for cleaner code -->
        <div id="no-results">
            <i class="ph-duotone ph-ghost" style="font-size: 3rem; margin-bottom: 10px;"></i><br>
            No games found. Try a different search.
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Created by The Wagonization (JackWagon885)</p>
        <p style="opacity: 0.5; font-size: 0.7rem;">"I only compile them in a list. All credit to owners."</p>
    </footer>

    <!-- Music Widget -->
    <div class="music-toggle" onclick="togglePlayer()">
        <i class="ph-fill ph-music-notes"></i>
    </div>

    <div class="music-player" id="musicPlayer">
        <div class="player-header">
            <span>NOW PLAYING</span>
            <i class="ph-bold ph-x" style="cursor: pointer" onclick="togglePlayer()"></i>
        </div>
        <div class="song-info">
            <span class="song-title">Background Vibes</span>
            <span style="font-size: 0.8rem; color: #666;">WagonOS Audio</span>
        </div>
        <div class="controls">
            <button class="ctrl-btn"><i class="ph-fill ph-skip-back"></i></button>
            <button class="ctrl-btn play-btn" onclick="togglePlay()"><i class="ph-fill ph-play" id="playIcon"></i></button>
            <button class="ctrl-btn"><i class="ph-fill ph-skip-forward"></i></button>
        </div>
        <input type="range" min="0" max="1" step="0.1" oninput="document.getElementById('bg-music').volume = this.value">
        
        <!-- Quick Load Song -->
        <input type="text" id="songUrl" placeholder="MP3 URL..." style="width: 100%; margin-top: 15px; background: rgba(0,0,0,0.3); border: none; padding: 5px; color: white; border-radius: 4px; font-size: 0.8rem;">
        <button onclick="loadSong()" style="width: 100%; margin-top: 5px; background: var(--secondary); border: none; color: white; padding: 5px; border-radius: 4px; cursor: pointer;">Load Custom Song</button>
    </div>

    <script>
        // --- 1. Game Data (The Engine) ---
        // This array replaces the messy HTML. Add new games here easily.
        const games = [
            { name: "2048", url: "../Pages/Subpages/Gamellection Subpages/2048.html", img: "../Images/2048Icon.png" },
            { name: "3 Slices", url: "../Pages/Subpages/Gamellection Subpages/3Slices.html", img: "../Images/3SlicesIcon.png" },
            { name: "3 Slices 2", url: "../Pages/Subpages/Gamellection Subpages/3Slices2.html", img: "../Images/3Slices2Icon.png" },
            { name: "Achievement Unlocked", url: "../Pages/Subpages/Gamellection Subpages/AchievementUnlocked.html", img: "../Images/AchievementUnlockedIcon.png" },
            { name: "Antbuster", url: "../Pages/Subpages/Gamellection Subpages/Antbuster.html", img: "../Images/AntbusterIcon.png" },
            { name: "Awesome Planes", url: "../Pages/Subpages/Gamellection Subpages/AwesomePlanes.html", img: "../Images/AwesomePlanesIcon.png" },
            { name: "Awesome Tanks", url: "../Pages/Subpages/Gamellection Subpages/AwesomeTanks.html", img: "../Images/AwesomeTanksIcon.png" },
            { name: "Awesome Tanks 2", url: "../Pages/Subpages/Gamellection Subpages/AwesomeTanks2.html", img: "../Images/AwesomeTanks2Icon.png" },
            { name: "Big Tower Tiny Square", url: "../Pages/Subpages/Gamellection Subpages/BigTowerTinySquare.html", img: "../Images/BigTowerTinySquareIcon.png" },
            { name: "Big FLAPPY Tower", url: "../Pages/Subpages/Gamellection Subpages/BigFLAPPYTowerVSTinySquare.html", img: "../Images/BigFLAPPYTowerVSTinySquareIcon.png" },
            { name: "Big ICE Tower", url: "../Pages/Subpages/Gamellection Subpages/BigICETowerTinySquare.html", img: "../Images/BigICETowerTinySquareIcon.png" },
            { name: "Big NEON Tower", url: "../Pages/Subpages/Gamellection Subpages/BigNEONTowerVSTinySquare.html", img: "../Images/BigNEONTowerVSTinySquareIcon.png" },
            { name: "Bloons TD 1", url: "../Pages/Subpages/Gamellection Subpages/BTD.html", img: "../Images/BTDIcon.png" },
            { name: "Bloons TD 2", url: "../Pages/Subpages/Gamellection Subpages/BTD2.html", img: "../Images/BTD2Icon.png" },
            { name: "Bloons TD 3", url: "../Pages/Subpages/Gamellection Subpages/BTD3.html", img: "../Images/BTD3Icon.png" },
            { name: "Connect 4", url: "../Pages/Subpages/Gamellection Subpages/Connect4.html", img: "../Images/Connect4Icon.png" },
            { name: "Escape Road", url: "../Pages/Subpages/Gamellection Subpages/EscapeRoad.html", img: "../Images/EscapeRoadIcon.png" },
            { name: "FNAF Winstons", url: "../Pages/Subpages/Gamellection Subpages/FiveNightsAtWinstons.html", img: "../Images/FNAWIcon.png" },
            { name: "Google Snake", url: "../Pages/Subpages/Gamellection Subpages/GoogleSnake.html", img: "../Images/GoogleSnakeIcon.png" },
            { name: "Hong Kong 97", url: "../Pages/Subpages/Gamellection Subpages/HongKong97.html", img: "../Images/HongKong97Icon.png" },
            { name: "Learn to Fly", url: "../Pages/Subpages/Gamellection Subpages/LearnToFly.html", img: "../Images/LearnToFlyIcon.png" },
            { name: "Learn to Fly 2", url: "../Pages/Subpages/Gamellection Subpages/LearnToFly2.html", img: "../Images/LearnToFly2Icon.png" },
            { name: "Learn to Fly 3", url: "../Pages/Subpages/Gamellection Subpages/LearnToFly3.html", img: "../Images/LearnToFly3Icon.png" },
            { name: "Minecraft Classic", url: "../Pages/Subpages/Gamellection Subpages/MinecraftClassic.html", img: "../Images/MinecraftClassicIcon.png" },
            { name: "Moo Moo", url: "../Pages/Subpages/Gamellection Subpages/MooMoo.html", img: "../Images/MooMooIcon.png" },
            { name: "n-gon", url: "../Pages/Subpages/Gamellection Subpages/n-gon.html", img: "../Images/n-gonIcon.png" },
            { name: "New Super Mario Bros", url: "../Pages/Subpages/Gamellection Subpages/NewSuperMarioBros.html", img: "../Images/NSMBIcon.png" },
            { name: "Pac-Man", url: "../Pages/Subpages/Gamellection Subpages/Pac-Man.html", img: "../Images/Pac-ManIcon.png" },
            { name: "Quick Draw", url: "../Pages/Subpages/Gamellection Subpages/QuickDrawWithGoogle.html", img: "../Images/QuickDrawWithGoogleIcon.png" },
            { name: "Run 3", url: "../Pages/Subpages/Gamellection Subpages/Run3.html", img: "../Images/Run3Icon.png" },
            { name: "Shell Shockers", url: "../Pages/Subpages/Gamellection Subpages/SHellShockers.html", img: "../Images/ShellShockersIcon.png" },
            { name: "Slope", url: "../Pages/Subpages/Gamellection Subpages/Slope.html", img: "../Images/SlopeIcon.png" },
            { name: "Smash Karts", url: "../Pages/Subpages/Gamellection Subpages/SmashKarts.html", img: "../Images/SmashKartsIcon.png" },
            { name: "Tetris", url: "../Pages/Subpages/Gamellection Subpages/Tetris.html", img: "../Images/TetrisIcon.png" },
            { name: "Wordle+", url: "../Pages/Subpages/Gamellection Subpages/Wordle+.html", img: "../Images/Wordle+Icon.png" }
        ];

        // --- 2. Render Logic ---
        const grid = document.getElementById('gameGrid');
        const noResults = document.getElementById('no-results');

        function renderGames(filterText = '') {
            // clear existing non-message elements
            Array.from(grid.children).forEach(child => {
                if(child.id !== 'no-results') grid.removeChild(child);
            });

            let matches = 0;
            const term = filterText.toLowerCase();

            games.forEach(game => {
                if (game.name.toLowerCase().includes(term)) {
                    matches++;
                    const card = document.createElement('a');
                    card.className = 'game-card';
                    card.href = game.url;
                    
                    card.innerHTML = `
                        <button class="fav-btn" onclick="event.preventDefault(); toggleFav(this)"><i class="ph-bold ph-heart"></i></button>
                        <div class="img-wrapper">
                            <img src="${game.img}" alt="${game.name}" onerror="this.src='https://via.placeholder.com/150?text=No+Img'">
                        </div>
                        <div class="card-info">
                            <div class="card-title">${game.name}</div>
                        </div>
                    `;
                    grid.insertBefore(card, noResults);
                }
            });

            noResults.style.display = matches === 0 ? 'block' : 'none';
        }

        // --- 3. Search Logic ---
        function filterGames() {
            const input = document.getElementById('searchInput');
            renderGames(input.value);
        }

        // --- 4. Music Player Logic ---
        const audio = document.getElementById('bg-music');
        const player = document.getElementById('musicPlayer');
        const playBtn = document.getElementById('playIcon');

        function togglePlayer() {
            player.classList.toggle('active');
        }

        function togglePlay() {
            if (audio.paused) {
                audio.play();
                playBtn.classList.replace('ph-play', 'ph-pause');
            } else {
                audio.pause();
                playBtn.classList.replace('ph-pause', 'ph-play');
            }
        }

        function loadSong() {
            const url = document.getElementById('songUrl').value;
            if(url) {
                audio.src = url;
                audio.play();
                playBtn.classList.replace('ph-play', 'ph-pause');
            }
        }

        function toggleFav(btn) {
            btn.querySelector('i').classList.toggle('ph-fill');
            btn.querySelector('i').classList.toggle('ph-bold');
            btn.style.color = btn.style.color === 'red' ? 'white' : 'red';
            btn.style.opacity = '1';
        }

        // Initialize
        window.onload = () => {
            renderGames();
            // Load saved music from Config page if available
            if(localStorage.getItem('savedSong')) {
                audio.src = localStorage.getItem('savedSong');
            }
        };

    </script>
    <script src="../yee.js"></script>
</body>
</html>
